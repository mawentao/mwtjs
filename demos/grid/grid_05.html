<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>带checkbox的grid</title>
  <link href='../../static/mwt.min.css' rel="stylesheet"/>
  <script src="../../static/dep/jquery/1.11.2/jquery.min.js"></script>
  <script src="../../static/mwt.min.js" charset="utf-8"></script>
</head>
<body style="padding:10px;">

<script>
  var store = new MWT.Store({
      "url": "../../ui/ajax.php"
  });
  var grid;

  $(document).ready(function(){
    grid = new MWT.Grid({
      render: "grid-div",
      store: store,
      pagebar: true, //!< false 表示不分页
      pageSize: 10,
      multiSelect:true, 
      cm: new MWT.Grid.ColumnModel([
        {head:"ID", dataIndex:"id", width:80, hide:false, sort:true},
        {head:"姓名", dataIndex:"name", poptitle:"姓名aaa", width:300},
        {head:"性别", dataIndex:"sex", sort:true, render:function(v){
          return v==1 ? "男" : "女";
        }},
        {head:"操作", dataIndex:"id",render:function(v,item){
          return "<button class='mwt-btn mwt-btn-default mwt-btn-sm' "+
                 "onclick=\"show_detail("+v+");\">查看详情</button>";
        }}
      ])
    });

    grid.create();
    grid.load();
  });

  function show_detail(id)
  {
    var item = grid.getRecord("id", id);
    print_r(item);
  }
  
  function show_select()
  {
    var records=grid.getSelectedRecords();
    if (records.length==0) alert("未选择记录");
    else {
		//print_r(records);
        var idarr=[];
        for (var i=0;i<records.length;++i)
            idarr.push(records[i].id);
        var ids=idarr.join(",");
        alert(ids);
    }
  }
</script>

<button class="mwt-btn mwt-btn-primary" onclick='show_select();'>查看选中的记录</button>
<br><br>
<div id='grid-div'></div>


</body>
</html>
