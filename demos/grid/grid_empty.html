<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>记录为空的Grid</title>
  <link href='../../static/mwt.min.css' rel="stylesheet"/>
  <script src="../../static/dep/requirejs/2.1.9/require.js"></script>
</head>
<body style="padding:10px;">

<script>
define("grid", function(require){
    require("jquery");
    require("mwt");
    var store,grid,o = {};
    var sexOptions=[
        {value:1,text:"男"},
        {value:0,text:"女"}
    ];

    o.init = function(){
        var thiso = this;
        store = new MWT.Store({
            "url": "../../ui/ajax.php?empty=1"
        });
        grid = new MWT.Grid({
            render: "grid-div",
            store: store,
            pagebar: true, //!< false 表示不分页
            pageSize: 10,
            multiSelect:true, 
            bordered: true,
            tbarStyle: 'margin-bottom:10px;',
            emptyMsg: '没有找到记录哦',
            position: 'fixed',
            bodyStyle: 'top:90px',
            cm: new MWT.Grid.ColumnModel([
              {head:"ID", dataIndex:"id", width:80, hide:false, sort:true},
              {head:"姓名", dataIndex:"name",poptitle:"用户姓名", width:300},
              {head:"性别", dataIndex:"sex", poptitle:"用户性别", sort:true, render:function(v){
                return v==1 ? "男" : "女";
              }},
              {head:"操作", dataIndex:"id",render:function(v,item){
                return v;
              }}
            ]),
            tbar: [
              {type:"select",label:"性别",id:"sex-sel",options:sexOptions,handler:thiso.query},
              {type:"search",label:"GO",id:"so-key",width:300,handler:thiso.query,placeholder:'搜索姓名'}
            ]
        });
        grid.create();
        this.query();
    };

    o.query = function() {
        store.baseParams = {
            sex: get_select_value("sex-sel"),
            key: get_value("so-key")
        };
        grid.load();
    };

    return o;
});


  require.config({
      baseUrl: "../../static/dep",
      packages: [
          {name:'jquery', location:'jquery/1.11.2', main:'jquery.min'},
          {name:'mwt', location:'../', main:'mwt.min'}
      ]
  });
  require(["grid"], function(grid){
      grid.init();
  });
</script>

<div id='grid-div' style="position:absolute;top:10px;bottom:10px;left:10px;right:10px;"></div>

</body>
</html>
