<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>表单对话框</title>
  <link href='../../libs/jquery-ui/jquery-ui.min.css' rel="stylesheet"/>
  <link href='../../static/mwt.min.css' rel="stylesheet"/>
  <script src="../../static/dep/jquery/1.11.2/jquery.min.js"></script>
  <script src="../../libs/jquery-ui/jquery-ui.min.js" charset="utf-8"></script>
  <script src="../../static/mwt.min.js" charset="utf-8"></script>
  <script src="../../static/dep/requirejs/2.1.9/require.js"></script>
  <script>
define("mydialog", function(require){
//    require("jquery");
//    require("jquery-ui");
    require("jquery/ajaxfileupload");
    require("mwt");
    var dialog,form,o={};

    //var sexOptions=[{text:"男",value:0},{text:"女",value:1}];

    o.init = function(){
        form = new MWT.Form();
        form.addField('avatar', new MWT.ImageUploadField({
            render  : 'avarardiv',
            imgupapi: 'http://139.196.29.35:8008/mawt/index.php/toolkit/ajax/upimg',
            value   : 'http://mobfile.youzu.com/gips/img?pic=11054529065484119915',
            empty   : false,
            errmsg  : "请上传图片",
            style   : 'border:solid 1px #ccc;width:50px;height:50px;'
        }));
        form.addField('name', new MWT.TextField({
            render: 'namediv',
            value: '',
            errmsg: '请输入姓名，不超过5个字符',
            checkfun: function(v){return v.length<=5;}
        }));
        form.addField('gender', new MWT.RadioField({
            render  : 'genderdiv',
            //cls     : 'mwt-radio',
            options : [{text:'保密',value:0},{text:"男",value:1},{text:"女",value:2}],
            value   : '',
            errmsg  : '请选择性别',
            empty   : false
        }));
        form.addField('profession', new MWT.SelectField({
            render  : 'professiondiv',
            options : [{text:'保密',value:0},{text:"学生",value:1},{text:"工人",value:2}],
            value   : '0',
            errmsg  : '请选择职业'
        }));
        form.addField('birthday', new MWT.DateTimePicker({
            render: 'birthdaydiv',
            format: 'yy-mm-dd',
            value: '1990-01-01'
        }));
        form.addField('interest', new MWT.CheckboxField({
            render: 'interestdiv',
            options: [{text:'体育',value:0},{text:"音乐",value:1},{text:"电影",value:2},{text:"看书",value:3},{text:"游戏",value:4},{text:"篮球",value:5}],
            value: [1,2],
            empty: false,
            errmsg: "请选择1~3个兴趣",
            checkfun: function(v){return v.length<=3;}
        }));

        dialog = new MWT.Dialog({
            title  : '表单窗口',
            width  : 400,
            height : "auto",
            top    : 50,
            form   : form,
            bodyStyle: 'padding:10px;',
            body   : '<table class="mwt-formtab">'+
                  '<tr><th width="60">头像：</th><td><div id="avarardiv"></div></td></tr>'+
                  '<tr><th>姓名：</th><td><div id="namediv"></div></td></tr>'+
                  '<tr><th>性别：</th><td><div id="genderdiv"></div></td></tr>'+
                  '<tr><th>生日：</th><td><div id="birthdaydiv" style="width:100px;"></div></td></tr>'+
                  '<tr><th>职业：</th><td><div id="professiondiv"></div></td></tr>'+
                  '<tr><th>兴趣：</th><td style="white-space:normal;"><div id="interestdiv"></div></td></tr>'+
                '</table>',
            buttons: [
                {"label":"确定",handler:o.submit},
                {"label":"关闭",type:'close',cls:'mwt-btn-danger'}
            ]
        });
    };

    o.open = function(){
        dialog.open();
    };

    o.submit = function() {
        var data = form.getData();
        print_r(data);
    };

    return o;
});

  require.config({
      baseUrl: "../../static/dep",
      packages: [
          {name:'jquery', location:'jquery/1.11.2', main:'jquery.min'},
          {name:'jquery-ui', location:'../../libs/jquery-ui', main:'jquery-ui.min'},
          {name:'mwt', location:'../', main:'mwt.min'}
      ]
  });
  require(["mydialog"], function(mydialog){
      mydialog.init();
      jQuery("#opener").click(function(){
          mydialog.open();
      });
  });
  </script>
</head>
<body style="padding:10px;">
  <button class='mwt-btn mwt-btn-default mwt-btn-lg' id='opener'>open dialog</button>
</body>
</html>
