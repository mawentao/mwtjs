define("biz/plan/ListView",function(require){function e(){t.apply(this,arguments)}var t=require("common/list/ListView"),n=require("er/util");n.inherits(e,t);var i=require("biz/buildUrl"),r=baidu.encodeHTML,a=[{title:"推广计划",field:"planName",width:150,editable:1,editRules:{required:1,requiredErrorMessage:"计划名称不能为空",exMaxLength:s,exMaxLengthErrorMessage:l,pattern:/^[\u4e00-\u9fa5A-Za-z0-9\-_—\[\]\(\)（）\"\'·，,]+$/g,patternErrorMessage:"单元名称只能从英文,中文,数字,中括号,小括号,单引号,双引号,·,-,_, —以及英文逗号中选取"},content:function(e){return T.format('<a href="#{url}" title="#{planName}">#{planName}</a>',{url:i("unit/list",e.planId,"plan"),planName:r(e.planName)})}},{title:"计划状态",field:"userStatus",width:100,content:function(e){return o.getUserStatusText(e)}},{title:"每日预算",field:"budget",width:70,editable:1,editRules:{required:1,requiredErrorMessage:"预算金额不能为空",min:50,minErrorMessage:"为了保证您的推广效果，每日预算不能低于50元"},content:function(e){return e.budget>0?e.budget:"不限定"}},{title:"点击",field:"clks",tip:"数据累计到昨天",width:70,content:function(e){return e.clks||"--"}},{title:"消费",field:"paysum",tip:"数据累计到昨天",width:70,content:function(e){return e.paysum||"--"}},{title:"展现",field:"shows",tip:"数据累计到昨天",width:70,content:function(e){return e.shows||"--"}},{title:"平均点击价格",field:"acp",tip:"数据累计到昨天",width:70,content:function(e){return e.acp||"--"}}],o=require("biz/lang/plan"),s=o.PLAN_NAME_MAX_LENTH,l="计划名称超过"+s+"个字符";e.prototype.uiProperties=n.mix({ListTable:{datasource:"@list",editable:1,columnResizable:1,select:"multi",fields:a},PlanBudgetDialog:{width:400,draggable:0,closeOnHide:0,mask:1,needFoot:0},modBudgetButton:{disabled:1}},t.prototype.uiProperties),e.prototype.uiEvents=n.mix({createPlanButton:{click:function(){this.fire("createPlan")}},modBudgetButton:{click:function(){this.fire("modBudget")}},"ListTable:startedit":function(e){switch(e.field.field){case"budget":this.fire("modBudget",e),e.returnResult=!1}},"ListTable:saveedit":function(e){switch(e.field.field){case"planName":this.fire("planname-edit",e);break;case"budget":this.fire("budget-edit",e)}}},t.prototype.uiEvents),require("er/tpl!./list.tpl.html");var u=require("esui/Dialog");return n.mix(e.prototype,{template:"planList",enterDocument:function(){t.prototype.enterDocument.apply(this,arguments)},handleEditResult:function(e,t){var n=this;if(e.status)u.alert({content:e.statusInfo||"请求出错+_+",type:"fail"});else{var a=T.format('<a href="#{0}">#{1}</a>',i("unit/list",t.planId,"plan"),r(t.planName));n.get("ListTable").setCellText(a,t.rowIndex,t.columnIndex)}}}),e});